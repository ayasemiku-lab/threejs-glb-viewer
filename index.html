<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <title>GLB ギャラリー（クリック拡大・戻るボタン緑）</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Import Map ポリフィル（iOS Safari 等） -->
  <script async src="https://unpkg.com/es-module-shims@1.10.0/dist/es-module-shims.min.js"></script>

  <!-- Import Map -->
  <script type="importmap">
  { "imports": { "three": "https://unpkg.com/three@0.165.0/build/three.module.js" } }
  </script>

  <style>
    :root { color-scheme: dark; }
    * { box-sizing: border-box; }
    body { margin:0; font:14px/1.5 system-ui, sans-serif; background:#0e0e10; color:#ddd; }
    h1 { text-align:center; padding:20px 0; }

    /* ===== ギャラリー ===== */
    .gallery {
      display:grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap:16px;
      max-width:1200px;
      margin:0 auto;
      padding:0 20px 40px;
    }
    @media (max-width: 900px) { .gallery { grid-template-columns: repeat(2, minmax(0, 1fr)); } }
    @media (max-width: 600px) { .gallery { grid-template-columns: 1fr; } }

    .card {
      position:relative; width:100%; padding-top:56.25%;
      border-radius:12px; overflow:hidden; background:#0e0e10;
      outline:1px solid rgba(255,255,255,.08);
      cursor:pointer; transition: transform .15s ease, outline-color .15s ease;
    }
    .card:hover { transform: translateY(-2px); outline-color: rgba(255,255,255,.22); }
    .card > glb-viewer { position:absolute; inset:0; width:100%; height:100%; }

    /* ===== モーダル ===== */
    .modal {
      position:fixed; inset:0;
      display:none; place-items:center;
      background:rgba(0,0,0,.6); backdrop-filter: blur(6px);
      z-index:9999;
    }
    .modal.open { display:grid; }

    .modal__inner {
      position:relative;
      width:100vw; height:100vh;
      background:#0b0b0d; overflow:hidden;
    }

    /* ← 戻るボタン（緑文字） */
    .modal__back {
      position:absolute;
      top:max(10px, env(safe-area-inset-top));
      left:max(10px, env(safe-area-inset-left));
      z-index:10000;
      border:0; border-radius:12px;
      background:rgba(255,255,255,.12);
      color:#4CAF50 !important;
      -webkit-text-fill-color:#4CAF50 !important;
      padding:10px 14px; cursor:pointer; font-weight:600;
    }
    .modal__back:hover { background:rgba(76,175,80,.25); }

    /* ✕ ボタン（緑文字） */
    .modal__close {
      position:absolute;
      top:max(10px, env(safe-area-inset-top));
      right:max(10px, env(safe-area-inset-right));
      z-index:10000;
      border:0; border-radius:12px;
      background:rgba(255,255,255,.12);
      color:#4CAF50 !important;
      -webkit-text-fill-color:#4CAF50 !important;
      padding:10px 12px; cursor:pointer;
    }
    .modal__close:hover { background:rgba(76,175,80,.25); }

    #modalViewer { position:absolute; inset:0; width:100%; height:100%; }
  </style>
</head>
<body>
  <h1>GLB モデルギャラリー</h1>

  <main class="gallery" id="gallery">
    <div class="card" data-src="assets/model.glb" data-autorotate="">
      <glb-viewer src="assets/model.glb" autorotate></glb-viewer>
    </div>
    <div class="card" data-src="assets/model.glb" data-exposure="1.2">
      <glb-viewer src="assets/model.glb" exposure="1.2"></glb-viewer>
    </div>
    <div class="card" data-src="assets/model.glb">
      <glb-viewer src="assets/model.glb"></glb-viewer>
    </div>
  </main>

  <!-- モーダル -->
  <div class="modal" id="modal">
    <div class="modal__inner">
      <button class="modal__back" id="backBtn">← 戻る</button>
      <button class="modal__close" id="closeBtn">✕</button>
      <glb-viewer id="modalViewer" bg="#0e0e10" autorotate></glb-viewer>
    </div>
  </div>

  <!-- JS部分（省略: 前と同じ） -->
  <script type="module">
    /* ... 前回の JavaScript そのまま ... */
  </script>
</body>
</html>
